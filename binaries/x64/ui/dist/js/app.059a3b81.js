(function(){var e={8031:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var s=r(4057),o=r(4741),n=r(3816),a=r(5255),i=r(3240),c=r(2515),u=r(9007),l=function(){var e=this,t=e._self._c;return t(n.Z,{staticClass:"elevation-12"},[t(a.EB,{staticClass:"headline"},[e._v("Login")]),t(a.ZB,[e.error?t(s.Z,{attrs:{type:"error",dismissible:""}},[e._v(" "+e._s(e.error)+" ")]):e._e(),t(i.Z,{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t(u.Z,{attrs:{label:"Username",required:"","prepend-icon":"mdi-account",disabled:e.loading},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t(u.Z,{attrs:{label:"Password",type:"password",required:"","prepend-icon":"mdi-lock",disabled:e.loading},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(a.h7,[t(c.Z),t(o.Z,{attrs:{color:"primary",type:"submit",loading:e.loading}},[e._v("Login")])],1)],1)],1)],1)},d=[],h=r(629),m={name:"LoginForm",data:()=>({username:"",password:"",loading:!1}),computed:{...(0,h.rn)("auth",["error","status"])},methods:{...(0,h.nv)("auth",["local_login"]),async login(){if(this.username&&this.password){this.loading=!0,console.log("Login attempt with:",this.username);try{await this.local_login({username:this.username,password:this.password}),this.$router.push("/clients")}catch(e){console.error("Login error in component:",e)}finally{this.loading=!1}}else this.$store.commit("auth/AUTH_ERROR","Username and password are required")}}},f=m,g=r(1001),p=(0,g.Z)(f,l,d,!1,null,null,null),v=p.exports},6700:function(e,t,r){var s={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":4048,"./sd.js":4048,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(e){var t=n(e);return r(t)}function n(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=n,e.exports=o,o.id=6700},8840:function(e,t,r){"use strict";var s=r(144),o=r(3726),n=r(1819),a=r(3102),i=function(){var e=this,t=e._self._c;return t(o.Z,{attrs:{id:"inspire"}},[t("Notification",{attrs:{notification:e.notification}}),e.isAuthenticated?t("div",[t("Header"),t(a.Z,[t(n.Z,[t("router-view")],1)],1),t("Footer")],1):t("div",[t("router-view")],1)],1)},c=[],u=r(4741),l=r(8741),d=function(){var e=this,t=e._self._c;return t(l.Z,{attrs:{right:!0,top:!0,color:e.notification.color},model:{value:e.notification.show,callback:function(t){e.$set(e.notification,"show",t)},expression:"notification.show"}},[e._v(" "+e._s(e.notification.text)+" "),t(u.Z,{attrs:{dark:"",text:""},on:{click:function(t){e.notification.show=!1}}},[e._v(" Close ")])],1)},h=[],m={name:"Notification",props:["notification"],data:()=>({})},f=m,g=r(1001),p=(0,g.Z)(f,d,h,!1,null,null,null),v=p.exports,j=r(3625),b=r(3816),y=r(5255),_=r(9088),w=r(1667),k=r(6322),A=r(8836),S=r(2515),Z=r(3845),C=function(){var e=this,t=e._self._c;return t(n.Z,[t(j.Z,{attrs:{app:""}},[t("img",{staticClass:"mr-3",attrs:{src:r(6949),height:"50",alt:"Wg Gen Plus"}}),t(Z.qW,{attrs:{to:"/"}},[e._v("Wg Gen Plus")]),t(S.Z),t(Z.lj,[t(u.Z,{attrs:{to:"/clients"}},[e._v(" Clients "),t(_.Z,{attrs:{right:"",dark:""}},[e._v("mdi-account-network-outline")])],1),t(u.Z,{attrs:{to:"/server"}},[e._v(" Server "),t(_.Z,{attrs:{right:"",dark:""}},[e._v("mdi-vpn")])],1),t(u.Z,{attrs:{to:"/status"}},[e._v(" Status "),t(_.Z,{attrs:{right:"",dark:""}},[e._v("mdi-chart-bar")])],1),t(u.Z,{attrs:{to:"/users",text:""}},[t(_.Z,{attrs:{left:""}},[e._v("mdi-account-group")]),e._v(" Users ")],1)],1),t(A.Z,{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:r}){return[t(u.Z,e._g({attrs:{icon:""}},r),[t(_.Z,[e._v("mdi-account-circle")])],1)]}}])},[t(b.Z,{staticClass:"mx-auto",attrs:{"max-width":"344",outlined:""}},[t(w.Z,{attrs:{"three-line":""}},[t(k.km,[t("div",{staticClass:"overline mb-4"},[e._v("connected as")]),t(k.V9,{staticClass:"headline mb-1"},[e._v(e._s(e.user.name))]),t(k.oZ,[e._v("Email: "+e._s(e.user.email))]),t(k.oZ,[e._v("Issuer: "+e._s(e.user.issuer))]),t(k.oZ,[e._v("Issued at: "+e._s(e._f("formatDate")(e.user.issuedAt)))])],1)],1),t(y.h7,[t(u.Z,{attrs:{small:""},on:{click:function(t){return e.logout()}}},[e._v(" logout "),t(_.Z,{attrs:{small:"",right:"",dark:""}},[e._v("mdi-logout")])],1)],1)],1)],1)],1)],1)},E=[],U=r(629),x={name:"Header",computed:{...(0,U.Se)({user:"auth/user"})},methods:{...(0,U.nv)("auth",{logout:"logout"})}},P=x,T=(0,g.Z)(P,C,E,!1,null,null,null),I=T.exports,O=r(7024),L=r(8984),R=r(7894),z=function(){var e=this,t=e._self._c;return t(n.Z,[t(L.Z,{attrs:{app:""}},[t(R.Z,{attrs:{justify:"start","no-gutters":""}},[t(O.Z,{attrs:{cols:"12",lg:"6",md:"12",sm:"12"}},[t("div",{attrs:{align:e.$vuetify.breakpoint.smAndDown?"center":"left"}},[t("small",[e._v("Copyright Â© "+e._s((new Date).getFullYear())+", Wg Gen Plus. ")]),t("small",[e._v("This work is licensed under the"),t("a",{staticClass:"pr-1 pl-1",attrs:{href:"https://www.apache.org/licenses/LICENSE-2.0.html",target:"_blank"}},[e._v("Apache 2.0 License.")])])])])],1),t(R.Z,{attrs:{justify:"end","no-gutters":""}},[t(O.Z,{attrs:{cols:"12",lg:"6",md:"12",sm:"12"}},[t("div",{attrs:{align:e.$vuetify.breakpoint.smAndDown?"center":"right"}},[t("small",[e._v("Created with")]),t(_.Z,{staticClass:"pr-1 pl-1"},[e._v("mdi-heart")]),t("span",[e._v("by")]),t("a",{staticClass:"pr-2 pl-1",attrs:{href:"mailto:lindsay@127-0-0-1.au"}},[e._v("Lindsay")]),t("a",{attrs:{href:"https://gitea.lgharvey.net/Lindsay/wg-gen-plus/commit/"+e.version}},[t("kbd",[e._v("Version: "+e._s(e.version.substring(0,7)))])])],1)])],1)],1)],1)},$=[],H={name:"Footer",data:()=>({}),computed:{...(0,U.Se)({version:"server/version"})},mounted(){this.versionServer()},methods:{...(0,U.nv)("server",{versionServer:"version"})}},q=H,Q=(0,g.Z)(q,z,$,!1,null,null,null),V=Q.exports,F=r(8031),N={name:"App",components:{Footer:V,Header:I,Notification:v,LoginForm:F.Z},data:()=>({notification:{show:!1,color:"",text:""}}),computed:{...(0,U.Se)({isAuthenticated:"auth/isAuthenticated",authStatus:"auth/authStatus",authRedirectUrl:"auth/authRedirectUrl",authError:"auth/error",clientError:"client/error",serverError:"server/error",isLocalAuth:"auth/isLocalAuth"})},created(){this.$vuetify.theme.dark=!0},async mounted(){const e=await this.check_auth_type();console.log("Auth type check result:",e),e?console.log("Local authentication enabled, skipping OAuth2 flow"):this.isAuthenticated||(console.log("Using OAuth2 flow"),this.$route.query.code&&this.$route.query.state?this.oauth2_exchange({code:this.$route.query.code,state:this.$route.query.state}):this.oauth2_url())},watch:{authError(e,t){console.log(e),this.notify("error",e)},clientError(e,t){console.log(e),this.notify("error",e)},serverError(e,t){console.log(e),this.notify("error",e)},isAuthenticated(e,t){console.log(`Updating isAuthenticated from ${t} to ${e}`),!0===e&&this.$router.push("/clients")},authStatus(e,t){console.log(`Updating authStatus from ${t} to ${e}`),"redirect"===e&&window.location.replace(this.authRedirectUrl)}},methods:{...(0,U.nv)("auth",{oauth2_exchange:"oauth2_exchange",oauth2_url:"oauth2_url",check_auth_type:"check_auth_type"}),notify(e,t){this.notification.show=!0,this.notification.color=e,this.notification.text=t}}},D=N,B=(0,g.Z)(D,i,c,!1,null,null,null),M=B.exports,W=r(4903);const G="token",Y="client_id",J=()=>window.localStorage.getItem(G),K=e=>{window.localStorage.setItem(G,e)},X=()=>{window.localStorage.removeItem(G)},ee=()=>window.localStorage.getItem(Y),te=e=>{window.localStorage.setItem(Y,e)},re=()=>{window.localStorage.removeItem(Y)};var se={getToken:J,saveToken:K,destroyToken:X,getClientId:ee,saveClientId:te,destroyClientId:re};const oe={setHeader(){const e=se.getToken();e&&(s.ZP.axios.defaults.headers.common["x-wg-gen-plus-auth"]=e)},get(e){return s.ZP.axios.get(e).then((e=>e.data)).catch((e=>{throw console.error("API GET error:",e),e}))},post(e,t){this.setHeader();const r={"Content-Type":"application/json"};return s.ZP.axios.post(e,t,{headers:r}).then((e=>e.data)).catch((r=>{throw console.error("API POST error:",r),console.error("Request was:",{resource:e,params:t}),console.error("Response was:",r.response?.data),r}))},put(e,t){return s.ZP.axios.put(e,t).then((e=>e.data)).catch((e=>{throw console.error("API PUT error:",e),e}))},patch(e,t){return s.ZP.axios.patch(e,t).then((e=>e.data)).catch((e=>{throw console.error("API PATCH error:",e),e}))},delete(e){return s.ZP.axios["delete"](e).then((e=>e.data)).catch((e=>{throw console.error("API DELETE error:",e),e}))},getWithConfig(e,t){return s.ZP.axios.get(e,t).then((e=>e.data)).catch((e=>{throw console.error("API GET with config error:",e),e}))}};var ne=oe;const ae={error:null,user:JSON.parse(localStorage.getItem("user"))||null,authStatus:"",authRedirectUrl:"",status:"",token:localStorage.getItem("token")||"",redirectUrl:null,isLocalAuth:!1},ie={error(e){return e.error},user(e){return e.user},isAuthenticated(e){return!!e.token&&null!==e.user},authRedirectUrl(e){return e.authRedirectUrl},authStatus(e){return e.authStatus},isLocalAuth:e=>e.isLocalAuth},ce={user({commit:e}){ne.get("/auth/user").then((t=>{e("user",t)})).catch((t=>{e("error",t),e("logout")}))},initAuth({commit:e,dispatch:t,state:r}){return new Promise((e=>{const s=se.getToken();s?(console.log("Found existing token, restoring session"),ne.setHeader(),r.user?console.log("User data already in state:",r.user):t("user")):console.log("No token found, user needs to authenticate"),e()}))},oauth2_url({commit:e,dispatch:t}){if(se.getToken())return ne.setHeader(),void t("user");ne.get("/auth/oauth2_url").then((r=>{"_magic_string_fake_auth_no_redirect_"===r.codeUrl?(console.log("server report oauth2 is disabled, fake exchange"),e("authStatus","disabled"),se.saveClientId(r.clientId),t("oauth2_exchange",{code:"",state:r.state})):(e("authStatus","redirect"),e("authRedirectUrl",r))})).catch((t=>{e("authStatus","error"),e("error",t),e("logout")}))},oauth2_exchange({commit:e,dispatch:t},r){r.clientId=se.getClientId(),ne.post("/auth/oauth2_exchange",r).then((r=>{e("authStatus","success"),e("token",r),t("user")})).catch((t=>{e("authStatus","error"),e("error",t),e("logout")}))},logout({commit:e}){ne.get("/auth/logout").then((t=>{e("logout")})).catch((t=>{e("authStatus",""),e("error",t),e("logout")}))},async check_auth_type({commit:e}){try{const t=await ne.get("/auth/type");console.log("Auth type response:",t);const r=t.isLocal;return e("SET_AUTH_TYPE",r),r}catch(t){return console.error("Error checking auth type:",t),!1}},async local_login({commit:e},{username:t,password:r}){e("AUTH_REQUEST");try{console.log("Attempting login with:",t,"password length:",r?.length);const s=await ne.post("/auth/login",{username:t,password:r});console.log("Login response:",s);const o=s.token,n=s.user;localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(n)),ne.setHeader(),e("AUTH_SUCCESS",{token:o,user:n})}catch(s){throw console.error("Login error:",s),console.error("Response data:",s.response?.data),e("AUTH_ERROR",s.response?.data?.error||"Authentication failed"),localStorage.removeItem("token"),localStorage.removeItem("user"),s}}},ue={error(e,t){e.error=t},authStatus(e,t){e.authStatus=t},authRedirectUrl(e,t){e.authRedirectUrl=t.codeUrl,se.saveClientId(t.clientId)},token(e,t){se.saveToken(t),ne.setHeader(),se.destroyClientId()},user(e,t){e.user=t},logout(e){e.user=null,e.token="",e.status="",se.destroyToken(),se.destroyClientId(),localStorage.removeItem("user")},AUTH_REQUEST(e){e.status="loading",e.error=null},AUTH_SUCCESS(e,{token:t,user:r}){e.status="success",e.token=t,e.user=r,e.error=null},AUTH_ERROR(e,t){e.status="error",e.error=t},AUTH_LOGOUT(e){e.status="",e.token="",e.user=null},SET_REDIRECT(e,t){e.status="redirect",e.redirectUrl=t},SET_AUTH_TYPE(e,t){e.isLocalAuth=t}};var le={namespaced:!0,state:ae,getters:ie,actions:ce,mutations:ue},de=r(8764)["lW"];const he={error:null,clients:[],clientQrcodes:[],clientConfigs:[]},me={error(e){return e.error},clients(e){return e.clients},getClientQrcode:e=>t=>{let r=e.clientQrcodes.find((e=>e.id===t));return r?r.qrcode:"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQDwAEhQGAhKmMIQAAAABJRU5ErkJggg=="},getClientConfig:e=>t=>{let r=e.clientConfigs.find((e=>e.id===t));return r?r.config:null}},fe={error({commit:e},t){e("errorVisible",!1),e("error",""),setTimeout((()=>{let r="Unknown error occurred";t?.response?.data?.message?r=t.response.data.message:t?.message?r=t.message:"string"===typeof t&&(r=t),e("error",r),e("errorVisible",!0)}),10)},readAll({commit:e,dispatch:t}){ne.get("/client").then((r=>{e("clients",r),t("readQrcodes"),t("readConfigs")})).catch((t=>{e("error",t)}))},create({commit:e,dispatch:t},r){ne.post("/client",r).then((r=>{t("readQrcode",r),t("readConfig",r),e("create",r)})).catch((t=>{e("error",t)}))},update({commit:e,dispatch:t},r){ne.patch(`/client/${r.id}`,r).then((r=>{t("readQrcode",r),t("readConfig",r),e("update",r)})).catch((t=>{e("error",t)}))},delete({commit:e},t){ne["delete"](`/client/${t.id}`).then((()=>{e("delete",t)})).catch((t=>{e("error",t)}))},email({commit:e},t){ne.get(`/client/${t.id}/email`).then((()=>{})).catch((t=>{e("error",t)}))},readQrcode({state:e,commit:t},r){ne.getWithConfig(`/client/${r.id}/config?qrcode=true`,{responseType:"arraybuffer"}).then((e=>{let s=de.from(e,"binary").toString("base64");t("clientQrcodes",{client:r,image:s})})).catch((e=>{t("error",e)}))},readConfig({state:e,commit:t},r){ne.getWithConfig(`/client/${r.id}/config?qrcode=false`,{responseType:"arraybuffer"}).then((e=>{t("clientConfigs",{client:r,config:e})})).catch((e=>{t("error",e)}))},readQrcodes({state:e,dispatch:t}){e.clients.forEach((e=>{t("readQrcode",e)}))},readConfigs({state:e,dispatch:t}){e.clients.forEach((e=>{t("readConfig",e)}))}},ge={error(e,t){e.error=t},clients(e,t){e.clients=t},create(e,t){e.clients.push(t)},update(e,t){let r=e.clients.findIndex((e=>e.id===t.id));-1!==r?(e.clients.splice(r,1),e.clients.push(t)):e.error="update client failed, not in list"},delete(e,t){let r=e.clients.findIndex((e=>e.id===t.id));-1!==r?e.clients.splice(r,1):e.error="delete client failed, not in list"},clientQrcodes(e,{client:t,image:r}){let s=e.clientQrcodes.findIndex((e=>e.id===t.id));-1!==s&&e.clientQrcodes.splice(s,1),e.clientQrcodes.push({id:t.id,qrcode:r})},clientConfigs(e,{client:t,config:r}){let s=e.clientConfigs.findIndex((e=>e.id===t.id));-1!==s&&e.clientConfigs.splice(s,1),e.clientConfigs.push({id:t.id,config:r})}};var pe={namespaced:!0,state:he,getters:me,actions:fe,mutations:ge};const ve={error:null,server:null,config:"",version:"_ci_build_not_run_properly_"},je={error(e){return e.error},server(e){return e.server},version(e){return e.version},config(e){return e.config}},be={error({commit:e},t){e("errorVisible",!1),e("error",""),setTimeout((()=>{let r="Unknown error occurred";t?.response?.data?.message?r=t.response.data.message:t?.message?r=t.message:"string"===typeof t&&(r=t),e("error",r),e("errorVisible",!0)}),10)},read({commit:e,dispatch:t}){ne.get("/server").then((r=>{e("server",r),t("config")})).catch((t=>{e("error",t)}))},update({commit:e},t){ne.patch("/server",t).then((t=>{e("server",t)})).catch((t=>{e("error",t)}))},config({commit:e}){ne.getWithConfig("/server/config",{responseType:"arraybuffer"}).then((t=>{e("config",t)})).catch((t=>{e("error",t)}))},version({commit:e}){ne.get("/server/version").then((t=>{e("version",t.version)})).catch((t=>{e("error",t)}))}},ye={error(e,t){e.error=t},server(e,t){e.server=t},config(e,t){e.config=t},version(e,t){e.version=t}};var _e={namespaced:!0,state:ve,getters:je,actions:be,mutations:ye};const we={error:null,enabled:!1,interfaceStatus:null,clientStatus:[],version:"_ci_build_not_run_properly_"},ke={error(e){return e.error},enabled(e){return e.enabled},interfaceStatus(e){return e.interfaceStatus},clientStatus(e){return e.clientStatus},version(e){return e.version}},Ae={error({commit:e},t){e("error",t)},read({commit:e}){ne.get("/status/interface").then((t=>{e("interfaceStatus",t)})).catch((t=>{e("interfaceStatus",null),e("error",t)})),ne.get("/status/clients").then((t=>{e("clientStatus",t)})).catch((t=>{e("clientStatus",[]),e("error",t)}))},isEnabled({commit:e}){ne.get("/status/enabled").then((t=>{e("enabled",t)})).catch((t=>{e("enabled",!1),e("error",t.response.data)}))}},Se={error(e,t){e.error=t},enabled(e,t){e.enabled=t},interfaceStatus(e,t){e.interfaceStatus=t},clientStatus(e,t){e.clientStatus=t},version(e,t){e.version=t}};var Ze={namespaced:!0,state:we,getters:ke,actions:Ae,mutations:Se};const Ce={error:null,errorVisible:!1,users:[],currentUser:null},Ee={error(e){return e.error},errorVisible(e){return e.errorVisible},users(e){return e.users},currentUser(e){return e.currentUser}},Ue={error({commit:e},t){e("setErrorVisible",!1),e("setError",""),setTimeout((()=>{let r="Unknown error occurred";t?.response?.data?.error?r=t.response.data.error:t?.response?.data?.message?r=t.response.data.message:t?.message?r=t.message:"string"===typeof t&&(r=t),console.log("Setting error message:",r),e("setError",r),e("setErrorVisible",!0),setTimeout((()=>{e("setErrorVisible",!1)}),5e3)}),10)},fetchUsers({commit:e}){return ne.get("/users").then((t=>{e("setUsers",t)})).catch((t=>{console.error("Fetch users error:",t.response?.data),e("error",t)}))},fetchUser({commit:e},t){return ne.get(`/users/${t}`).then((t=>(e("setCurrentUser",t),t))).catch((t=>{throw console.error("Fetch user error:",t.response?.data),e("error",t),t}))},createUser({commit:e,dispatch:t},r){return ne.post("/users",r).then((e=>(t("fetchUsers"),e))).catch((t=>{console.log("Create user error - raw:",t);let r="Failed to create user";throw t.response&&t.response.data&&t.response.data.error?r=t.response.data.error:t.message&&(r=t.message),console.log("Error message to display:",r),e("setError",r),e("setErrorVisible",!0),t}))},updateUser({commit:e,dispatch:t},r){return ne.patch(`/users/${r.sub}`,r).then((e=>(t("fetchUsers"),e))).catch((t=>{console.error("Update user error:",t.response?.data);let r="Failed to update user";throw t.response&&t.response.data&&t.response.data.error?r=t.response.data.error:t.message&&(r=t.message),e("setError",r),e("setErrorVisible",!0),t}))},deleteUser({commit:e,dispatch:t},r){return ne["delete"](`/users/${r}`).then((()=>{t("fetchUsers")})).catch((t=>{console.error("Delete user error:",t.response?.data);let r="Failed to delete user";throw t.response&&t.response.data&&t.response.data.error?r=t.response.data.error:t.message&&(r=t.message),e("setError",r),e("setErrorVisible",!0),t}))},clearError({commit:e}){e("setError",""),e("setErrorVisible",!1)},fetchCurrentUser({commit:e}){return ne.get("/users/me").then((t=>(e("setCurrentUser",t),t))).catch((t=>{console.error("Fetch current user error:",t.response?.data),e("error",t),e("setCurrentUser",{sub:"",name:"Unknown User",email:"",isAdmin:!1})}))}},xe={setError(e,t){e.error=t},setErrorVisible(e,t){e.errorVisible=t},setUsers(e,t){e.users=t},setCurrentUser(e,t){e.currentUser=t}};var Pe={namespaced:!0,state:Ce,getters:Ee,actions:Ue,mutations:xe};s.ZP.use(U.ZP);var Te=new U.ZP.Store({modules:{auth:le,client:pe,server:_e,status:Ze,users:Pe}});s.ZP.use(W.ZP);const Ie=[{path:"/clients",name:"clients",component:function(){return Promise.all([r.e(156),r.e(817),r.e(349),r.e(386)]).then(r.bind(r,9755))},meta:{requiresAuth:!0}},{path:"/server",name:"server",component:function(){return Promise.all([r.e(156),r.e(57)]).then(r.bind(r,1776))},meta:{requiresAuth:!0}},{path:"/status",name:"status",component:function(){return Promise.all([r.e(156),r.e(817),r.e(614)]).then(r.bind(r,8949))},meta:{requiresAuth:!0}},{path:"/users",name:"users",component:function(){return Promise.all([r.e(156),r.e(817),r.e(349),r.e(530)]).then(r.bind(r,5434))},meta:{requiresAuth:!0}},{path:"/",name:"home",component:function(){return r.e(268).then(r.bind(r,883))}},{path:"*",redirect:"/"}],Oe=new W.ZP({mode:"history",base:"/",routes:Ie});Oe.beforeEach(((e,t,r)=>{if(e.matched.some((e=>e.meta.requiresAuth))){if(Te.getters["auth/isAuthenticated"])return void r();r("/")}else"/"===e.path&&Te.getters["auth/isAuthenticated"]?r("/clients"):r()}));var Le=Oe,Re=r(8986);s.ZP.use(Re.Z);var ze=new Re.Z({}),$e=r(381),He=r.n($e),qe=r(2513),Qe=r.n(qe);He().locale("en"),s.ZP.use(Qe(),{moment:He()}),s.ZP.filter("formatDate",(function(e){return e?He()(String(e)).format("YYYY-MM-DD HH:mm"):""}));const Ve=r(571),Fe={install(){s.ZP.isCidr=Ve,s.ZP.prototype.$isCidr=Ve}};s.ZP.use(Fe);var Ne=r(9669),De=r.n(Ne),Be=r(2346);s.ZP.use(Be.Z,De());let Me="/api/v1.0";s.ZP.axios.defaults.baseURL=Me,s.ZP.axios.interceptors.request.use((function(e){const t=se.getToken();return t&&(e.headers["x-wg-gen-plus-auth"]=t),e}),(function(e){return Promise.reject(e)})),s.ZP.axios.interceptors.response.use((function(e){return e}),(function(e){if(401!==e.response.status)return Promise.reject(e);se.destroyToken(),se.destroyClientId(),window.location="/"})),s.ZP.config.productionTip=!0,Te.dispatch("auth/initAuth").then((()=>{new s.ZP({router:Le,store:Te,vuetify:ze,render:function(e){return e(M)}}).$mount("#app")}))},6949:function(e,t,r){"use strict";e.exports=r.p+"img/logo.07658c96.png"}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,function(){r.amdO={}}(),function(){var e=[];r.O=function(t,s,o,n){if(!s){var a=1/0;for(l=0;l<e.length;l++){s=e[l][0],o=e[l][1],n=e[l][2];for(var i=!0,c=0;c<s.length;c++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](s[c])}))?s.splice(c--,1):(i=!1,n<a&&(a=n));if(i){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[s,o,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,s){return r.f[s](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+({57:"Server",268:"Home",386:"Clients",530:"Users",614:"Status"}[e]||e)+"."+{57:"64012e23",156:"dd9b43f6",268:"a341e3e2",349:"d3933142",386:"7c1c4e84",530:"101be6ff",614:"7ff38381",817:"376f632c"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+({57:"Server",386:"Clients",530:"Users"}[e]||e)+"."+{57:"6c840448",386:"b6f7c04c",530:"d31e9a27",817:"b3f40b9b"}[e]+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ui:";r.l=function(s,o,n,a){if(e[s])e[s].push(o);else{var i,c;if(void 0!==n)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+n){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+n),i.src=s),e[s]=[o];var h=function(t,r){i.onerror=i.onload=null,clearTimeout(m);var o=e[s];if(delete e[s],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(r)})),t)return t(r)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){r.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,r,s,o){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var a=function(r){if(n.onerror=n.onload=null,"load"===r.type)s();else{var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=i,n.parentNode.removeChild(n),o(c)}};return n.onerror=n.onload=a,n.href=t,r?r.parentNode.insertBefore(n,r.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var o=r[s],n=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(n===e||n===t))return o}var a=document.getElementsByTagName("style");for(s=0;s<a.length;s++){o=a[s],n=o.getAttribute("data-href");if(n===e||n===t)return o}},s=function(s){return new Promise((function(o,n){var a=r.miniCssF(s),i=r.p+a;if(t(a,i))return o();e(s,i,null,o,n)}))},o={143:0};r.f.miniCss=function(e,t){var r={57:1,386:1,530:1,817:1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=s(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};r.f.j=function(t,s){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)s.push(o[2]);else{var n=new Promise((function(r,s){o=e[t]=[r,s]}));s.push(o[2]=n);var a=r.p+r.u(t),i=new Error,c=function(s){if(r.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var n=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",i.name="ChunkLoadError",i.type=n,i.request=a,o[1](i)}};r.l(a,c,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,a=s[0],i=s[1],c=s[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(c)var l=c(r)}for(t&&t(s);u<a.length;u++)n=a[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(l)},s=self["webpackChunkui"]=self["webpackChunkui"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(8840)}));s=r.O(s)})();
//# sourceMappingURL=app.059a3b81.js.map