{"version":3,"file":"js/Users-legacy.101be6ff.js","mappings":"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","sources":["webpack://ui/./src/views/Users.vue?e049","webpack://ui/./src/components/Users.vue?2705","webpack://ui/src/components/Users.vue","webpack://ui/./src/components/Users.vue?741f","webpack://ui/./src/components/Users.vue","webpack://ui/src/views/Users.vue","webpack://ui/./src/views/Users.vue?422e","webpack://ui/./src/views/Users.vue"],"sourcesContent":["import { VMain } from 'vuetify/lib/components/VMain';\n\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c(VMain,[_c('Users')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\n\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c(VContainer,[(_vm.errorVisible)?_c(VAlert,{attrs:{\"type\":\"error\",\"prominent\":\"\",\"dismissible\":\"\"},on:{\"input\":_vm.clearError}},[(_vm.error)?_c('div',[_vm._v(_vm._s(_vm.error))]):_c('div',[_vm._v(\"An unknown error occurred\")])]):_vm._e(),_c(VRow,[_c(VCol,{attrs:{\"cols\":\"12\"}},[_c(VCard,{attrs:{\"dark\":\"\"}},[_c(VCardTitle,[_vm._v(\" User Management \"),_c(VSpacer),(_vm.isAdmin)?_c(VBtn,{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.openCreateDialog}},[_vm._v(\" Add New User \"),_c(VIcon,{attrs:{\"right\":\"\",\"dark\":\"\"}},[_vm._v(\"mdi-account-plus\")])],1):_vm._e()],1),_c(VDataTable,{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.isAdmin ? _vm.adminHeaders : _vm.userHeaders,\"items\":_vm.users,\"search\":_vm.search,\"dark\":\"\"},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c(VTextField,{staticClass:\"mx-4\",attrs:{\"label\":\"Search\",\"prepend-icon\":\"mdi-magnify\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})]},proxy:true},{key:\"item.isAdmin\",fn:function({ item }){return [(item.isAdmin)?_c(VIcon,{attrs:{\"color\":\"green\"}},[_vm._v(\"mdi-check\")]):_c(VIcon,{attrs:{\"color\":\"red\"}},[_vm._v(\"mdi-close\")])]}},{key:\"item.actions\",fn:function({ item }){return [(_vm.isAdmin || _vm.currentUser.sub === item.sub)?_c(VIcon,{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editUser(item)}}},[_vm._v(\" mdi-pencil \")]):_vm._e(),(_vm.isAdmin && _vm.currentUser.sub !== item.sub)?_c(VIcon,{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteUser(item)}}},[_vm._v(\" mdi-delete \")]):_vm._e()]}}])})],1)],1)],1),_c(VDialog,{attrs:{\"max-width\":\"500px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c(VCard,{attrs:{\"dark\":\"\"}},[_c(VCardTitle,[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c(VCardText,[_c(VContainer,[(_vm.errorVisible)?_c(VAlert,{attrs:{\"type\":\"error\",\"dense\":\"\",\"text\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e(),_c(VRow,[_c(VCol,{attrs:{\"cols\":\"12\"}},[_c(VTextField,{attrs:{\"label\":\"Name\",\"rules\":[v => !!v || 'Name is required'],\"required\":\"\"},model:{value:(_vm.editedItem.name),callback:function ($$v) {_vm.$set(_vm.editedItem, \"name\", $$v)},expression:\"editedItem.name\"}})],1),_c(VCol,{attrs:{\"cols\":\"12\"}},[_c(VTextField,{attrs:{\"label\":\"Email\",\"type\":\"email\"},model:{value:(_vm.editedItem.email),callback:function ($$v) {_vm.$set(_vm.editedItem, \"email\", $$v)},expression:\"editedItem.email\"}})],1),_c(VCol,{attrs:{\"cols\":\"12\"}},[_c(VTextField,{attrs:{\"label\":\"Password\",\"type\":\"password\",\"hint\":_vm.passwordHint,\"persistent-hint\":\"\"},model:{value:(_vm.editedItem.password),callback:function ($$v) {_vm.$set(_vm.editedItem, \"password\", $$v)},expression:\"editedItem.password\"}})],1),(_vm.isAdmin)?_c(VCol,{attrs:{\"cols\":\"12\"}},[_c(VSwitch,{attrs:{\"label\":\"Administrator\",\"color\":\"primary\"},model:{value:(_vm.editedItem.isAdmin),callback:function ($$v) {_vm.$set(_vm.editedItem, \"isAdmin\", $$v)},expression:\"editedItem.isAdmin\"}})],1):_vm._e()],1)],1)],1),_c(VCardActions,[_c(VSpacer),_c(VBtn,{attrs:{\"color\":\"error\",\"text\":\"\"},on:{\"click\":_vm.closeDialog}},[_vm._v(\" Cancel \")]),_c(VBtn,{attrs:{\"color\":\"success\",\"text\":\"\"},on:{\"click\":_vm.saveUser}},[_vm._v(\" Save \")])],1)],1)],1),_c(VDialog,{attrs:{\"max-width\":\"500px\"},model:{value:(_vm.deleteDialog),callback:function ($$v) {_vm.deleteDialog=$$v},expression:\"deleteDialog\"}},[_c(VCard,{attrs:{\"dark\":\"\"}},[_c(VCardTitle,{staticClass:\"headline\"},[_vm._v(\" Delete User \")]),_c(VCardText,[_vm._v(\" Are you sure you want to delete this user? This action cannot be undone. \")]),_c(VCardActions,[_c(VSpacer),_c(VBtn,{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.closeDeleteDialog}},[_vm._v(\" Cancel \")]),_c(VBtn,{attrs:{\"color\":\"error\",\"text\":\"\"},on:{\"click\":_vm.confirmDelete}},[_vm._v(\" Delete \")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <!-- Error alert -->\n    <v-alert\n      v-if=\"errorVisible\"\n      type=\"error\"\n      prominent\n      dismissible\n      @input=\"clearError\"\n    >\n      <div v-if=\"error\">{{ error }}</div>\n      <div v-else>An unknown error occurred</div>\n    </v-alert>\n    \n    <v-row>\n      <v-col cols=\"12\">\n        <v-card dark>\n          <v-card-title>\n            User Management\n            <v-spacer></v-spacer>\n            <v-btn\n              v-if=\"isAdmin\"\n              color=\"primary\"\n              @click=\"openCreateDialog\"\n            >\n              Add New User\n              <v-icon right dark>mdi-account-plus</v-icon>\n            </v-btn>\n          </v-card-title>\n          <v-data-table\n            :headers=\"isAdmin ? adminHeaders : userHeaders\"\n            :items=\"users\"\n            :search=\"search\"\n            class=\"elevation-1\"\n            dark\n          >\n            <template v-slot:top>\n              <v-text-field\n                v-model=\"search\"\n                label=\"Search\"\n                class=\"mx-4\"\n                prepend-icon=\"mdi-magnify\"\n              ></v-text-field>\n            </template>\n            <template v-slot:item.isAdmin=\"{ item }\">\n              <v-icon v-if=\"item.isAdmin\" color=\"green\">mdi-check</v-icon>\n              <v-icon v-else color=\"red\">mdi-close</v-icon>\n            </template>\n            <template v-slot:item.actions=\"{ item }\">\n              <v-icon\n                v-if=\"isAdmin || currentUser.sub === item.sub\"\n                small\n                class=\"mr-2\"\n                @click=\"editUser(item)\"\n              >\n                mdi-pencil\n              </v-icon>\n              <v-icon\n                v-if=\"isAdmin && currentUser.sub !== item.sub\"\n                small\n                @click=\"deleteUser(item)\"\n              >\n                mdi-delete\n              </v-icon>\n            </template>\n          </v-data-table>\n        </v-card>\n      </v-col>\n    </v-row>\n\n    <!-- Edit/Create User Dialog -->\n    <v-dialog v-model=\"dialog\" max-width=\"500px\">\n      <v-card dark>\n        <v-card-title>\n          <span class=\"headline\">{{ formTitle }}</span>\n        </v-card-title>\n\n        <v-card-text>\n          <v-container>\n            <v-alert\n              v-if=\"errorVisible\"\n              type=\"error\"\n              dense\n              text\n            >\n              {{ error }}\n            </v-alert>\n            <v-row>\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"editedItem.name\"\n                  label=\"Name\"\n                  :rules=\"[v => !!v || 'Name is required']\"\n                  required\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"editedItem.email\"\n                  label=\"Email\"\n                  type=\"email\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"editedItem.password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  :hint=\"passwordHint\"\n                  persistent-hint\n                ></v-text-field>\n              </v-col>\n              <v-col v-if=\"isAdmin\" cols=\"12\">\n                <v-switch\n                  v-model=\"editedItem.isAdmin\"\n                  label=\"Administrator\"\n                  color=\"primary\"\n                ></v-switch>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"error\"\n            text\n            @click=\"closeDialog\"\n          >\n            Cancel\n          </v-btn>\n          <v-btn\n            color=\"success\"\n            text\n            @click=\"saveUser\"\n          >\n            Save\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- Delete Confirmation Dialog -->\n    <v-dialog v-model=\"deleteDialog\" max-width=\"500px\">\n      <v-card dark>\n        <v-card-title class=\"headline\">\n          Delete User\n        </v-card-title>\n        <v-card-text>\n          Are you sure you want to delete this user? This action cannot be undone.\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"primary\"\n            text\n            @click=\"closeDeleteDialog\"\n          >\n            Cancel\n          </v-btn>\n          <v-btn\n            color=\"error\"\n            text\n            @click=\"confirmDelete\"\n          >\n            Delete\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\n\nexport default {\n  name: 'Users',\n\n  data: () => ({\n    search: '',\n    dialog: false,\n    deleteDialog: false,\n    adminHeaders: [\n      { text: 'Name', value: 'name' },\n      { text: 'Email', value: 'email' },\n      { text: 'Admin', value: 'isAdmin' },\n      { text: 'Actions', value: 'actions', sortable: false }\n    ],\n    userHeaders: [\n      { text: 'Name', value: 'name' },\n      { text: 'Email', value: 'email' },\n      { text: 'Actions', value: 'actions', sortable: false }\n    ],\n    editedIndex: -1,\n    editedItem: {\n      sub: '',\n      name: '',\n      email: '',\n      password: '',\n      isAdmin: false\n    },\n    defaultItem: {\n      sub: '',\n      name: '',\n      email: '',\n      password: '',\n      isAdmin: false\n    }\n  }),\n\n  computed: {\n    ...mapGetters({\n      users: 'users/users',\n      currentUser: 'users/currentUser',\n      error: 'users/error',\n      errorVisible: 'users/errorVisible'\n    }),\n    formTitle() {\n      return this.editedIndex === -1 ? 'New User' : 'Edit User'\n    },\n    isAdmin() {\n      return this.currentUser && this.currentUser.isAdmin;\n    },\n    passwordHint() {\n      if (this.editedIndex === -1) {\n        return 'Enter a new password';\n      } else {\n        return 'Leave blank to keep current password';\n      }\n    }\n  },\n\n  mounted() {\n    this.fetchUsers();\n    // Get current user if not already loaded\n    if (!this.currentUser) {\n      this.getCurrentUser();\n    }\n  },\n\n  methods: {\n    ...mapActions('users', {\n      fetchUsers: 'fetchUsers',\n      createUser: 'createUser',\n      updateUser: 'updateUser',\n      removeUser: 'deleteUser',\n      setError: 'error',\n      doClearError: 'clearError'\n    }),\n\n    getCurrentUser() {\n      // This would need to be implemented in your store\n      // Fetch the currently logged in user's details\n      this.$store.dispatch('users/fetchCurrentUser');\n    },\n\n    clearError() {\n      console.log(\"Clearing error\");\n      this.doClearError();\n    },\n\n    openCreateDialog() {\n      if (!this.isAdmin) return;\n      \n      this.editedIndex = -1;\n      this.editedItem = Object.assign({}, this.defaultItem);\n      this.dialog = true;\n    },\n\n    editUser(item) {\n      // Only allow editing if admin or self\n      if (!this.isAdmin && this.currentUser.sub !== item.sub) return;\n      \n      this.editedIndex = this.users.indexOf(item);\n      // Clone the item but exclude the password\n      this.editedItem = {\n        ...item,\n        password: '' // Always start with empty password field when editing\n      };\n      this.dialog = true;\n    },\n\n    deleteUser(item) {\n      // Only admins can delete users, and they can't delete themselves\n      if (!this.isAdmin || this.currentUser.sub === item.sub) return;\n      \n      this.editedIndex = this.users.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.deleteDialog = true;\n    },\n\n    closeDialog() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n\n    closeDeleteDialog() {\n      this.deleteDialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n\n    async saveUser() {\n      // Clear previous errors\n      this.clearError();\n      \n      // Validate required fields\n      if (!this.editedItem.name) {\n        this.setError('Name is required');\n        return;\n      }\n\n      try {\n        // If not admin, ensure isAdmin stays false\n        if (!this.isAdmin) {\n          this.editedItem.isAdmin = false;\n        }\n        \n        // When editing, if password is empty, don't send it\n        const userToSave = { ...this.editedItem };\n        if (this.editedIndex > -1 && !userToSave.password) {\n          delete userToSave.password;\n        }\n        \n        if (this.editedIndex > -1) {\n          // Update existing user\n          await this.updateUser(userToSave);\n        } else {\n          // Create new user\n          await this.createUser(userToSave);\n        }\n        this.closeDialog();\n      } catch (error) {\n        console.error('Error saving user:', error);\n        \n        // Log the full error structure for debugging\n        console.log(\"Error object:\", {\n          message: error.message,\n          response: error.response,\n          responseData: error.response?.data,\n          errorMessage: error.response?.data?.error\n        });\n        \n        // Handle 400 errors more explicitly\n        if (error.response && error.response.status === 400) {\n          // Extract the error message from the response\n          const errorMsg = error.response.data.error || 'The server rejected your request';\n          this.setError(errorMsg);\n        } else {\n          // For other errors, use a generic message\n          this.setError('Failed to save user: ' + (error.message || 'Unknown error'));\n        }\n      }\n    },\n\n    async confirmDelete() {\n      try {\n        if (!this.isAdmin) return;\n        \n        await this.removeUser(this.editedItem.sub);\n        this.closeDeleteDialog();\n      } catch (error) {\n        console.error('Error deleting user:', error);\n        \n        // Handle error display\n        if (error.response && error.response.data && error.response.data.error) {\n          this.setError(error.response.data.error);\n        } else {\n          this.setError('Failed to delete user');\n        }\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=83e48784&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-main>\n    <Users/>\n  </v-main>\n</template>\n\n<script>\n  import Users from '../components/Users'\n\n  export default {\n    name: 'users',\n    components: {\n      Users\n    }\n  }\n</script>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=733fb19e&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","VMain","staticRenderFns","VContainer","VAlert","attrs","on","clearError","_v","_s","error","_e","VRow","VCol","VCard","VSpacer","VBtn","openCreateDialog","VIcon","VDataTable","staticClass","isAdmin","adminHeaders","userHeaders","users","search","scopedSlots","_u","key","fn","VTextField","model","value","callback","$$v","expression","proxy","item","currentUser","sub","$event","editUser","deleteUser","VDialog","dialog","formTitle","v","editedItem","$set","passwordHint","VSwitch","closeDialog","saveUser","deleteDialog","closeDeleteDialog","confirmDelete","name","data","text","sortable","editedIndex","email","password","defaultItem","computed","errorVisible","mounted","fetchUsers","getCurrentUser","methods","createUser","updateUser","removeUser","setError","doClearError","$store","dispatch","console","log","Object","assign","indexOf","$nextTick","async","userToSave","message","response","responseData","errorMessage","status","errorMsg","component","components","Users"],"sourceRoot":""}